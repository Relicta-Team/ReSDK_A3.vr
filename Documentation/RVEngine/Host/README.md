# Host - Архитектура

Host (`intercept_x64.dll`) — главный модуль RVEngine, который загружается движком Arma 3 и управляет клиентскими плагинами.

## Компоненты Host

1. **[Loader](LOADER.md)** - Сканирует память для поиска SQF функций
2. **[Invoker](INVOKER.md)** - Вызывает нативные SQF функции
3. **[Controller](CONTROLLER.md)** - Управляет жизненным циклом клиентов
4. **[Extensions](EXTENSIONS.md)** - Загружает и управляет плагинами

## Роль Host

- Загружается движком как extension через `callExtension`
- Сканирует память процесса для поиска SQF функций
- Предоставляет безопасный API клиентским плагинам
- Управляет потокобезопасностью и синхронизацией
- Диспетчеризует события к клиентам

## Архитектура

```
┌─────────────────────────────────────────┐
│         Arma 3 (RV Engine)              │
│  ┌───────────────────────────────────┐  │
│  │    SQF Virtual Machine            │  │
│  │  - Интерпретатор                  │  │
│  │  - Переменные (namespaces)        │  │
│  │  - Контекст (game_state)          │  │
│  └─────────────┬─────────────────────┘  │
│                │                         │
│  ┌─────────────▼─────────────────────┐  │
│  │   Нативные SQF функции (C++)     │  │
│  │  - ~3000+ функций                 │  │
│  └─────────────┬─────────────────────┘  │
└────────────────┼─────────────────────────┘
                 │
     ┌───────────▼────────────┐
     │    Host (intercept)    │
     ├────────────────────────┤
     │ • Loader  ◄── Поиск    │
     │ • Invoker ◄── Вызовы   │
     │ • Controller ◄── Управ │
     │ • Extensions ◄── Загр  │
     └───────────┬────────────┘
                 │
     ┏━━━━━━━━━━━┻━━━━━━━━━━┓
     ▼                       ▼
┌──────────┐          ┌──────────┐
│ Client 1 │          │ Client 2 │
└──────────┘          └──────────┘
```

Подробнее в [Архитектуре системы](../ARCHITECTURE.md).

---

[Loader](LOADER.md) | [Invoker](INVOKER.md) | [Controller](CONTROLLER.md) | [Extensions](EXTENSIONS.md)

